# 连接wifi

更新日期：2020-06-28

--------------------------------------

## 1. Live系统连接WiFi

Live系统中我们只能使用自带的连接工具进行连接。主要是iw和wpa工具。

按照如下顺序执行命令即可：

```lua
-- 打开网卡
ip link     -- 查看网卡状态，取得网卡ID(一般是wlp2s0这样的格式)
ip link set wlp3s0 up       -- 激活网卡
-- ip link set wlp3s0 down  -- 关闭网卡(有时候连接怎么都连接不上，可以先关闭再激活多试一试)

-- 各种查看网卡使用情况
iw dev
iw dev wlp3s0 station dump
ip link show wlp3s0

-- 扫描WIFI，这里会列出可以连接的热点
iw dev wlp3s0 scan | less

-- 使用用户名和密码连接WiFi
wpa_supplicant [-B] -i wlp3s0 -c <(wpa_passphrase WIFI_SSID PASSWORD)

-- 启用dhcp
dhcpcd wlp3s0

-- 查看连接状态
iw dev wlp3s0 link
ip addr show
```

## 2. 本机系统连接WiFi

在Live系统连接上网络切换到本机环境后，就可以装上带有图形界面的连接工具了。

### 2.1 使用图形界面工具连接WiFi

安装如下几个软件：

 - dialog
 - wpa_supplicant
 - netctl
 - wireless_tools
 - dhcpcd

其中`netctl`里面的`wifi-menu`工具就是一个图形界面工具。

重启后执行`wifi-menu`命令即可。按画面选择WiFi热点并输入密码就可以了。

## 3 设置开机自动连接WiFi

### 3.1 查看连接WiFi后生成的热点配置文件

配置文件生成位置在：`/etc/netctl/`

例如连接热点`HUMAX-F5568-A`后生成这样一个文件：
`wlp3s0-HUMAX-F5568-A`

### 3.2 设定自动连接WiFi的服务

netctl会帮我们生成好对应的服务。我们只需要将这个服务设置为开机启动就可以了。

比如我的网卡ID为`wlp3s0`，就会有`netctl-auto@wlp3s0.service`，我们只需要`systemctl enable`它就可以设为开机启动了。
